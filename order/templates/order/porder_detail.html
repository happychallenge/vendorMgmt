{% extends "base.html" %}
{% load static bootstrap3 %}

{% block title %}
    ORDER DETAIL
{% endblock title %}

{% block css %}
    <link href="{% static 'css/iCheck/custom.css' %}" rel="stylesheet">
    <link href="{% static 'css/dataTables/datatables.min.css' %}" rel="stylesheet">
{% endblock css %}


{% block header-index %}
    <h2> PURCHASE ORDER </h2>
    <ol class="breadcrumb">
        <li>
            <a href="{% url 'home' %}">Home</a>  
        </li>
        <li>
            <a href="{% url 'order:porder_list' %}"> 
                PURCHASE ORDER
            </a>
        </li>
        <li class="active">
            <strong>PURCHASE ORDER DETAIL</strong>
        </li>
    </ol>
{% endblock header-index %}


{% block mainContent %}
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>PURCHASE ORDER DETAIL </h5>
                <div class="ibox-tools">

                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#">Config option 1</a></li>
                    </ul>
                </div>
            </div>

            <div class="ibox-content"> 
                <table class="table table-striped table-bordered table-hover" >
                    <thead>
                        <tr>
                            <th style='width:20%'>ITEM</th>
                            <th>CONTENT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="gradeX">
                            <td>OFFER #</td>
                            <td>{{ porder.offer_no }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>NAME</td>
                            <td>{{ porder.name }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>VENDOR</td>
                            <td>{{ porder.vendor }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>CONTACT</td>
                            <td>{{ porder.contact }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>TOTAL AMOUNT</td>
                            <td>{{ porder.total_amount }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>PRICE TERM</td>
                            <td>{{ porder.paycondition.price_term }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>PAY PERIOD</td>
                            <td>{{ porder.paycondition.pay_term }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>CONFIRMED</td>
                            <td>{{ porder.confirmed }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>FIXED</td>
                            <td>{{ porder.fixed }}</td>
                        </tr>
                        <tr class="gradeX">
                            <td>PAID</td>
                            <td>{{ porder.paid }}</td>
                        </tr>
                    {# PORDER ITEM #}
                        <tr class="gradeX">
                            <td colspan="2">
                                <h3>ORDER ITEM</h3>
                                <table class="table table-striped table-bordered ">
                                    <thead>
                                        <tr>
                                            <th>PRODUCT</th>
                                            <th>P TYPE</th>
                                            <th>AMOUNT</th>
                                            <th>UNIT PRICE</th>
                                            <th>PURCHASE PRICE</th>
                                            <th>PACKING</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                {% for porderitem in porder.porderitem_set.all %}
                                    <tr>
                                        <td> {{porderitem.product}} </td>
                                        <td> {{porderitem.ptype}} </td>
                                        <td style='text-align:right'> {{porderitem.amount|floatformat:2}} </td>
                                        <td style='text-align:right'> $ {{porderitem.unit_price|floatformat:2}} </td>
                                        <td style='text-align:right'> $ {{porderitem.purchase_price|floatformat:2}} </td>
                                        <td> 
                                            {{porderitem.packing.unit_weight}} Kg
                                            {{porderitem.packing.packing_type}}
                                            {{porderitem.packing.pallet_weight}} Kg per Pallet
                                        </td>
                                    </tr>                            
                                {% endfor %}
                                    </tbody>
                                </table>
                            </td>
                        </tr>

                        <tr class="gradeX">
                            <td colspan="2">
                                <h3>SHIPPING ITEM</h3>
                                <table class="table table-striped table-bordered ">
                                    <thead>
                                        <tr>
                                            <th>DESTINATION</th>
                                            <th>SHIPPING DATE</th>
                                            <th>COMMENT</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                {% for shipping in porder.shipping_set.all %}
                                    <tr>
                                        <td> {{shipping.destination}} </td>
                                        <td> {{shipping.shipping_date}} </td>
                                        <td width='50%'> {{shipping.comments|linebreaks}} </td>
                                    </tr>                            
                                    </tr>                            
                                    </tr>                            
                                {% endfor %}
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    {% if porder.paid == False %}
                        <tr>
                            <td colspan="2">
                                <a href="{% url 'order:shipping_add' porder.id %}"> 
                                    <button class="btn btn-primary"> ADD SHIPPING </button>
                                </a>                  
                                <a href="{% url 'order:porderitem_add' porder.id %}"> 
                                    <button class="btn btn-primary pull-right">MODIFY ORDER</button>
                                </a>
                            </td>
                        </tr>
                    {% endif %}
                    </tbody>
                </table>

            </div> <!-- class="ibox-content" -->
        </div> <!-- class="ibox float-e-margins" -->
    </div> <!-- class="col-lg-12" -->
        
{% endblock mainContent %}



{% block javascript %}
    

{% endblock javascript %}

</body>

</html>
